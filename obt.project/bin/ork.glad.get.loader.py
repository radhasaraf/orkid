#!/usr/bin/env python3

import os
from ork import pip
from ork.command import Command
from ork.path import Path
from ork.wget import wget 

pip.install("glad")

ext_list = "GL_ARB_debug_output,"
ext_list += "GL_EXT_debug_label,"
ext_list += "GL_EXT_debug_marker,"
ext_list += "GL_EXT_memory_object,"
ext_list += "GL_EXT_memory_object_fd,"
ext_list += "GL_KHR_debug,"
ext_list += "GL_NVX_blend_equation_advanced_multi_draw_buffers,"
ext_list += "GL_NVX_conditional_render,"
ext_list += "GL_NVX_gpu_memory_info,"
ext_list += "GL_NVX_gpu_multicast2,"
ext_list += "GL_NVX_linked_gpu_multicast,"
ext_list += "GL_NVX_progress_fence,"
ext_list += "GL_NV_alpha_to_coverage_dither_control,"
ext_list += "GL_NV_bindless_multi_draw_indirect,"
ext_list += "GL_NV_bindless_multi_draw_indirect_count,"
ext_list += "GL_NV_bindless_texture,"
ext_list += "GL_NV_blend_equation_advanced,"
ext_list += "GL_NV_blend_equation_advanced_coherent,"
ext_list += "GL_NV_blend_minmax_factor,"
ext_list += "GL_NV_blend_square,"
ext_list += "GL_NV_clip_space_w_scaling,"
ext_list += "GL_NV_command_list,"
ext_list += "GL_NV_compute_program5,"
ext_list += "GL_NV_compute_shader_derivatives,"
ext_list += "GL_NV_conditional_render,"
ext_list += "GL_NV_conservative_raster,"
ext_list += "GL_NV_conservative_raster_dilate,"
ext_list += "GL_NV_conservative_raster_pre_snap,"
ext_list += "GL_NV_conservative_raster_pre_snap_triangles,"
ext_list += "GL_NV_conservative_raster_underestimation,"
ext_list += "GL_NV_copy_depth_to_color,"
ext_list += "GL_NV_copy_image,"
ext_list += "GL_NV_deep_texture3D,"
ext_list += "GL_NV_depth_buffer_float,"
ext_list += "GL_NV_depth_clamp,"
ext_list += "GL_NV_draw_texture,"
ext_list += "GL_NV_draw_vulkan_image,"
ext_list += "GL_NV_evaluators,"
ext_list += "GL_NV_explicit_multisample,"
ext_list += "GL_NV_fence,"
ext_list += "GL_NV_fill_rectangle,"
ext_list += "GL_NV_float_buffer,"
ext_list += "GL_NV_fog_distance,"
ext_list += "GL_NV_fragment_coverage_to_color,"
ext_list += "GL_NV_fragment_program,"
ext_list += "GL_NV_fragment_program2,"
ext_list += "GL_NV_fragment_program4,"
ext_list += "GL_NV_fragment_program_option,"
ext_list += "GL_NV_fragment_shader_barycentric,"
ext_list += "GL_NV_fragment_shader_interlock,"
ext_list += "GL_NV_framebuffer_mixed_samples,"
ext_list += "GL_NV_framebuffer_multisample_coverage,"
ext_list += "GL_NV_geometry_program4,"
ext_list += "GL_NV_geometry_shader4,"
ext_list += "GL_NV_geometry_shader_passthrough,"
ext_list += "GL_NV_gpu_multicast,"
ext_list += "GL_NV_gpu_program4,"
ext_list += "GL_NV_gpu_program5,"
ext_list += "GL_NV_gpu_program5_mem_extended,"
ext_list += "GL_NV_gpu_shader5,"
ext_list += "GL_NV_half_float,"
ext_list += "GL_NV_internalformat_sample_query,"
ext_list += "GL_NV_light_max_exponent,"
ext_list += "GL_NV_memory_attachment,"
ext_list += "GL_NV_memory_object_sparse,"
ext_list += "GL_NV_mesh_shader,"
ext_list += "GL_NV_multisample_coverage,"
ext_list += "GL_NV_multisample_filter_hint,"
ext_list += "GL_NV_occlusion_query,"
ext_list += "GL_NV_packed_depth_stencil,"
ext_list += "GL_NV_parameter_buffer_object,"
ext_list += "GL_NV_parameter_buffer_object2,"
ext_list += "GL_NV_path_rendering,"
ext_list += "GL_NV_path_rendering_shared_edge,"
ext_list += "GL_NV_pixel_data_range,"
ext_list += "GL_NV_point_sprite,"
ext_list += "GL_NV_present_video,"
ext_list += "GL_NV_primitive_restart,"
ext_list += "GL_NV_primitive_shading_rate,"
ext_list += "GL_NV_query_resource,"
ext_list += "GL_NV_query_resource_tag,"
ext_list += "GL_NV_register_combiners,"
ext_list += "GL_NV_register_combiners2,"
ext_list += "GL_NV_representative_fragment_test,"
ext_list += "GL_NV_robustness_video_memory_purge,"
ext_list += "GL_NV_sample_locations,"
ext_list += "GL_NV_sample_mask_override_coverage,"
ext_list += "GL_NV_scissor_exclusive,"
ext_list += "GL_NV_shader_atomic_counters,"
ext_list += "GL_NV_shader_atomic_float,"
ext_list += "GL_NV_shader_atomic_float64,"
ext_list += "GL_NV_shader_atomic_fp16_vector,"
ext_list += "GL_NV_shader_atomic_int64,"
ext_list += "GL_NV_shader_buffer_load,"
ext_list += "GL_NV_shader_buffer_store,"
ext_list += "GL_NV_shader_storage_buffer_object,"
ext_list += "GL_NV_shader_subgroup_partitioned,"
ext_list += "GL_NV_shader_texture_footprint,"
ext_list += "GL_NV_shader_thread_group,"
ext_list += "GL_NV_shader_thread_shuffle,"
ext_list += "GL_NV_shading_rate_image,"
ext_list += "GL_NV_stereo_view_rendering,"
ext_list += "GL_NV_tessellation_program5,"
ext_list += "GL_NV_texgen_emboss,"
ext_list += "GL_NV_texgen_reflection,"
ext_list += "GL_NV_texture_barrier,"
ext_list += "GL_NV_texture_compression_vtc,"
ext_list += "GL_NV_texture_env_combine4,"
ext_list += "GL_NV_texture_expand_normal,"
ext_list += "GL_NV_texture_multisample,"
ext_list += "GL_NV_texture_rectangle,"
ext_list += "GL_NV_texture_rectangle_compressed,"
ext_list += "GL_NV_texture_shader,"
ext_list += "GL_NV_texture_shader2,"
ext_list += "GL_NV_texture_shader3,"
ext_list += "GL_NV_timeline_semaphore,"
ext_list += "GL_NV_transform_feedback,"
ext_list += "GL_NV_transform_feedback2,"
ext_list += "GL_NV_uniform_buffer_unified_memory,"
ext_list += "GL_NV_vdpau_interop,"
ext_list += "GL_NV_vdpau_interop2,"
ext_list += "GL_NV_vertex_array_range,"
ext_list += "GL_NV_vertex_array_range2,"
ext_list += "GL_NV_vertex_attrib_integer_64bit,"
ext_list += "GL_NV_vertex_buffer_unified_memory,"
ext_list += "GL_NV_vertex_program,"
ext_list += "GL_NV_vertex_program1_1,"
ext_list += "GL_NV_vertex_program2,"
ext_list += "GL_NV_vertex_program2_option,"
ext_list += "GL_NV_vertex_program3,"
ext_list += "GL_NV_vertex_program4,"
ext_list += "GL_NV_video_capture,"
ext_list += "GL_NV_viewport_array2,"
ext_list += "GL_NV_viewport_swizzle,"
ext_list += "GL_KHR_texture_compression_astc_hdr"

out_path = Path(os.environ["ORKID_WORKSPACE_DIR"])/"ork.lev2"/"src"/"gfx"/"gl"/"glad"

cmd_list = ["glad","--profile","compatibility","--api","gl=4.6","--generator","c"]
cmd_list += ["--out-path", out_path]
cmd_list += ["--local-files"]
cmd_list += ["--extensions", '%s'%ext_list]

Command(cmd_list).exec()